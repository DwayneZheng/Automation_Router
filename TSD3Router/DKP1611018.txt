*** Settings ***
Documentation     Subject: TSD3 Router->Settings->Internet
...
...               Date：2017/12/18
Suite Setup       ElementLocator-DIR-878
Force Tags        DKP1611018
Resource          ../AllResources.txt
Library           String

*** Test Cases ***
0046
    [Documentation]    Internet->IPv4 PPPoE Always on + Dynamic IP test + MTU(Auto) + Mac Address Clone(enable)
    ...
    ...
    ...
    ...    Criteria not test in this case:
    ...
    ...    ------------------------------------
    ...
    ...
    ...    2.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...
    ...    OK verify by Richard Wu 20171213
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0046
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    #setting Dynamic IP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    #Setting MAC Address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check-My PC MAC}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check-My PC MAC}
    #===Check MAC \ Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1464
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1465
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0047
    [Documentation]    Internet->IPv4 PPPoE Always on + Dynamic IP test + MTU(Auto) + Mac Address Clone(disable)
    ...
    ...    Criteria not test in this case::
    ...
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    OK verify by Richard Wu 20171213
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0047
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    #setting Dynamic IP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}    5    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}    #Remove MAC address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"==""
    Should Be True    "${Before MAC Address}"=="${Finish MAC Address}"
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1464
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1465
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0048
    [Documentation]    Internet->IPv4 PPPoE Always on + Dynamic IP test + MTU(Manual) + Mac Address Clone(enable)
    ...
    ...    Criteria not test in this case:
    ...
    ...    ------------------------------------
    ...
    ...
    ...    2.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    OK verify by Richard Wu 20171228
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0048
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    #setting Dynamic IP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    1350
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    #Setting MAC Address clone
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}    3    true
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check mac}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check mac}
    #===Check MAC Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1322
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1323
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0049
    [Documentation]    Internet->IPv4 PPPoE Always on + Dynamic IP test + MTU(Manual) + Mac Address Clone(disable)
    ...
    ...
    ...    Criteria not test in this case:
    ...
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    OK verify by Richard Wu 20171213
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0049
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    #setting Dynamic IP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    1350
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"==""
    Should Be True    "${Before MAC Address}"=="${Finish MAC Address}"
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1322
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1323
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0050
    [Documentation]    Internet->IPv4 PPPoE Always on + Static IP test + MTU(Auto) + Mac Address Clone(enable)
    ...
    ...    Criteria not test in this case:
    ...
    ...    ------------------------------------
    ...    1.Capture wan packet to make sure DUT wan is using your MAC address
    ...
    ...    2.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    第 32行環境問題，先關閉
    ...
    ...    第 68行 因為878設定固定ip會跑掉，所以先把判斷ip功能關閉
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0050
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    #choose Static IP
    clearText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}    10.10.10.250    #input static address
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    8.8.8.8
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    #Setting MAC Address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check-My PC MAC}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check-My PC MAC}
    #===Check MAC \ Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1464
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1465
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0051
    [Documentation]    Internet->IPv4 PPPoE Always on + Static IP test + MTU(Auto) + Mac Address Clone(disable)
    ...
    ...    Criteria not test in this case:
    ...
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    第 32行環境問題，先關閉
    ...
    ...    第 68行 因為878設定固定ip會跑掉，所以先把判斷ip功能關閉
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0051
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    #choose Static IP
    clearText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}    10.10.10.250    #input static address
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    8.8.8.8
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    #Setting MTU
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"==""
    Should Be True    "${Before MAC Address}"=="${Finish MAC Address}"
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1464
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1465
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0052
    [Documentation]    Internet->IPv4 PPPoE Always on + Static IP test + MTU(Manual) + Mac Address Clone(enable)
    ...
    ...    Criteria not test in this case:
    ...
    ...    ------------------------------------
    ...    1.Capture wan packet to make sure DUT wan is using your MAC address
    ...
    ...    2.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    第 32行環境問題，先關閉
    ...
    ...    第 73行 因為878設定固定ip會跑掉，所以先把判斷ip功能關閉
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0052
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    #choose Static IP
    clearText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}    10.10.10.250    #input static address
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    8.8.8.8
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    1350
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    #Setting MAC Address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check-My PC MAC}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check-My PC MAC}
    #===Check MAC \ Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1322
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1323
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0053
    [Documentation]    Internet->IPv4 PPPoE Always on + Static IP test + MTU(Manual) + Mac Address Clone(disable)
    ...
    ...    Criteria not test in this case:
    ...
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    第 32行環境問題，先關閉
    ...
    ...    第 67行 因為878設定固定ip會跑掉，所以先把判斷ip功能關閉
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0053
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    #choose Static IP
    clearText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}    10.10.10.250
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    8.8.8.8
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    1350
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"==""
    Should Be True    "${Before MAC Address}"=="${Finish MAC Address}"
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1322
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1323
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0063
    [Documentation]    Internet->IPv4 PPPoE Manual + Static IP test + MTU(Auto) + Mac Address Clone(disable)
    ...
    ...    Criteria not test in this case:
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    第 32行環境問題，先關閉
    ...
    ...    OK verify by Richard Wu 20171228
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0063
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    #choose Static IP
    clearText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}    10.10.10.250    #input static address
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    8.8.8.8
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    #Setting MTU
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    120s
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"==""
    Should Be True    "${Before MAC Address}"=="${Finish MAC Address}"
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1464
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1465
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    #Disconnect Test
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0064
    [Documentation]    Internet->IPv4 PPPoE Manual + Static IP test + MTU(Manual) + Mac Address Clone(enable)
    ...
    ...    Criteria not test in this case:
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    第 33行環境問題，先關閉
    ...
    ...
    ...    OK verify by Richard Wu 20171228
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0064
    # copy by 52
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    #choose Static IP
    clearText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}    10.10.10.250    #input static address
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    8.8.8.8
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    1350
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    #Setting MAC Address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    60s
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check-My PC MAC}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check-My PC MAC}
    #===Check MAC \ Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1322
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1323
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0065
    [Documentation]    Internet->IPv4 PPPoE Manual + Static IP test + MTU(Manual) + Mac Address Clone(disable)
    ...
    ...    Criteria not test in this case:
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    第 33行環境問題，先關閉
    ...
    ...    OK verify by Richard Wu 20171228
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0065
    #copy 53
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Static IP-SelectChild}    #choose Static IP
    clearText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}    10.10.10.250
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    8.8.8.8
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    1350
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    sleep    1s
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    60s
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"==""
    Should Be True    "${Before MAC Address}"=="${Finish MAC Address}"
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1322
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1323
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0066
    [Documentation]    Internet->IPv4 PPPoE Manual + Dynamic IP test + MTU(Auto) + Mac Address Clone(enable)
    ...
    ...    Criteria not test in this case:
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...
    ...    OK verify by Richard Wu 20171228
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0066
    #copy 46
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    #setting Dynamic IP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    #Setting MAC Address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    sleep    1s
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    60S
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check-My PC MAC}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check-My PC MAC}
    #===Check MAC \ Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1464
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1465
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0067
    [Documentation]    Internet->IPv4 PPPoE Manual + Dynamic IP test + MTU(Auto) + Mac Address Clone(disable)
    ...
    ...    Criteria not test in this case:
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    OK verify by Richard Wu 20171228
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0067
    #copy 47
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    #setting Dynamic IP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}    5    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}    #Remove MAC address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    60s
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"==""
    Should Be True    "${Before MAC Address}"=="${Finish MAC Address}"
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1464
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1465
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0068
    [Documentation]    Internet->IPv4 PPPoE Manual + Dynamic IP test + MTU(Manual) + Mac Address Clone(enable)
    ...
    ...    Criteria not test in this case:
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    OK verify by Richard Wu 20171228
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0068
    #copy 48
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    #setting Dynamic IP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    1350
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    #Setting MAC Address clone
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}    3    true
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    60s
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check mac}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check mac}
    #===Check MAC Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1322
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1323
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0069
    [Documentation]    Internet->IPv4 PPPoE Manual + Dynamic IP test + MTU(Manual) + Mac Address Clone(disable)
    ...
    ...    Criteria not test in this case:
    ...    ------------------------------------
    ...    1.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...    OK verify by Richard Wu 20171228
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0069
    #copy 49
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Dynamic IP-SelectChild}    #setting Dynamic IP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-MTU-Manual-Input-Input}    1350
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    60s
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Check type
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"    #Check connection type
    #===Check type End===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"==""
    Should Be True    "${Before MAC Address}"=="${Finish MAC Address}"
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1322
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1323
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0001
    [Documentation]    Internet->IPv4 DHCP test
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    5.Capture wan packet to make sure DUT wan is using your MAC address
    ...    -------------------------------------
    ...
    ...    OK verify by Dwayne Cheng 20171214
    [Tags]    DKP1611018-DHCP    DKP1611018-DHCP-0001
    #===Restore===
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (DHCP)"
    #===Before Change MAC Address===
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #===Setting DHCP===
    Configure DHCP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-DHCP-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-DHCP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-DHCP-Auto-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-DHCP-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-DHCP-var(1)-SelectChild}    #Setting MAC Address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-DHCP-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-DHCP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting DHCP END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #===Finish MAC Address===
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (DHCP)"
    #===Ping \ Gateway===
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check mac}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check mac}
    #===Check MAC \ Address END===
    #===Ping MTU===
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1472
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1473
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0002
    [Documentation]    Internet->IPv4 DHCP DNS test
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    5.Capture wan packet and make sure DUT wan is quering DNS server 8.8.8.8
    ...    -------------------------------------
    ...
    ...    Fail
    ...    ----------------------------------
    ...    DIR-878_FW_V1.10B03
    ...    The LAN PC can get ping request and the ping value higher than 1373.
    ...    But MTU =1400
    ...    ----------------------------------
    ...    Pass
    ...    ----------------------------------
    ...    DIR-878_FW_V1.01B03
    ...    ----------------------------------
    ...
    ...    OK verify by Dwayne Cheng 20171218
    [Tags]    DKP1611018-DHCP    DKP1611018-DHCP-0002
    Ethernet_DNS    DHCP
    #===Restore===
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #===Setting DHCP===
    Configure DHCP-Without Save
    #===Configure DNS Server===
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-DHCP-Advanced Settings...-Click}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-DHCP-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-DHCP-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-DHCP-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-DHCP-Secondary DNS Server-Input}    2.2.2.2
    #===Configure DNS Server End===
    #===Configure MTU===
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-DHCP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-DHCP-Manual-SelectChild}    #Setting MTU
    clearText    ${Settings-Internet-IPv4-DHCP-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-DHCP-Manual-Input-Input}    1400
    #===Configure MTU End===
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Host Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-DHCP-Host Name-Input}
    sendtext    ${Settings-Internet-IPv4-DHCP-Host Name-Input}    DUT model
    #save
    click    ${Settings-Internet-IPv4-DHCP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting DHCP END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (DHCP)"
    #===Ping \ Gateway===
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetPrimary DNS Server1}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server1}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #===Ping MTU===
    ${CheckMTU1300}    defping    0    ${GetDefault Gateway}    -f    -l    1300
    ...    default    default
    Should Be True    "${CheckMTU1300}"=="True"
    ${CheckMTU1372}    defping    0    ${GetDefault Gateway}    -f    -l    1372
    ...    default    default
    Should Be True    "${CheckMTU1372}"=="True"
    FlushDns
    sleep    5s
    ${CheckDlink1}    defping    0    www.dlink.com    default    default    default
    ...    default    default
    Should Be True    "${CheckDlink1}"=="False"
    Ethernet_DNS    back
    #===Configure DNS Server===
    FunctionTable-Settings-Internet
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-DHCP-Advanced Settings...-Click}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-DHCP-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-DHCP-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-DHCP-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-DHCP-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-DHCP-Secondary DNS Server-Input}    8.8.8.8
    #save
    click    ${Settings-Internet-IPv4-DHCP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    5s
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetPrimary DNS Server2}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server2}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${CheckDlink2}    defping    0    www.google.com    default    default    default
    ...    default    default
    Should Be True    "${CheckDlink2}"=="True"
    #===Configure DNS Server End===
    ${CheckMTU1373}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${CheckMTU1373}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0003
    [Documentation]    Internet->IPv4 Static IP test
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    5.Capture wan packet to make sure DUT wan is using your MAC address
    ...    -------------------------------------
    ...
    ...
    ...    OK verify by Dwayne Cheng 20171219
    [Tags]    DKP1611018-StaticIP    DKP1611018-StaticIP-0003
    #===Restore===
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #===Before Change MAC Address===
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #===Setting Static IP===
    Configure Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-Advanced Settings...-Click}
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-StaticIP-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-Auto-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-var(1)-SelectChild}    #Setting MAC Address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-StaticIP-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-StaticIP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting Static IP End===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #===Finish MAC Address===
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (Static)"
    #===Ping \ Gateway===
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    sleep    3s
    #===Ping END===
    #===Ping MTU===
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1472
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1473
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    #Check MAC \ Address
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check-My PC MAC}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check-My PC MAC}
    #===Check MAC \ Address END===

0004
    [Documentation]    Internet->IPv4 Static IP DNS test
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    4.Capture wan packet and make sure DUT wan is quering DNS server 8.8.8.8
    ...    -------------------------------------
    ...
    ...    OK verify by Dwayne Cheng 20171219
    [Tags]    DKP1611018-StaticIP    DKP1611018-StaticIP-0004
    Ethernet_DNS    DHCP
    #===Restore===
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #===Setting Static IP===
    Configure Static IP-Without Save
    #===Configure DNS Server===
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-Advanced Settings...-Click}
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-StaticIP-IP Address-Input}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-StaticIP-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-StaticIP-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-StaticIP-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-StaticIP-Secondary DNS Server-Input}    2.2.2.2
    #===Configure DNS Server End===
    #===Configure MTU===
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-Manual-SelectChild}    #Setting MTU
    clearText    ${Settings-Internet-IPv4-StaticIP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-StaticIP-MTU-Manual-Input-Input}    1400
    #===Configure MTU End===
    #save
    click    ${Settings-Internet-IPv4-DHCP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting Static IP End===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (Static)"
    #===Ping \ Gateway===
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetPrimary DNS Server1}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server1}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #===Ping MTU===
    ${CheckMTU1300}    defping    0    ${GetDefault Gateway}    -f    -l    1300
    ...    default    default
    Should Be True    "${CheckMTU1300}"=="True"
    ${CheckMTU1372}    defping    0    ${GetDefault Gateway}    -f    -l    1372
    ...    default    default
    Should Be True    "${CheckMTU1372}"=="True"
    FlushDns
    sleep    5s
    ${CheckDlink1}    defping    0    www.dlink.com    default    default    default
    ...    default    default
    Should Be True    "${CheckDlink1}"=="False"
    Ethernet_DNS    back
    #===Configure DNS Server===
    FunctionTable-Settings-Internet
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-StaticIP-Advanced Settings...-Click}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-StaticIP-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-StaticIP-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-StaticIP-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-StaticIP-Secondary DNS Server-Input}    8.8.8.8
    #save
    click    ${Settings-Internet-IPv4-DHCP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    5s
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetPrimary DNS Server2}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server2}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${CheckDlink2}    defping    0    www.google.com    default    default    default
    ...    default    default
    Should Be True    "${CheckDlink2}"=="True"
    #===Configure DNS Server End===
    ${CheckMTU1373}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${CheckMTU1373}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0005
    [Documentation]    Internet->IPv4 PPPoE DNS test
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    3.Capture wan packet and make sure DUT wan is quering DNS server 8.8.8.8
    ...    -------------------------------------
    ...
    ...    OK verify by Dwayne Cheng 20171219
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0005
    Ethernet_DNS    DHCP
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure PPPoE-Without Save
    #===Configure DNS Server===
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Secondary DNS Server-Input}    2.2.2.2
    #===Configure DNS Server End===
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPPoE)"
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetPrimary DNS Server1}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server1}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #===Ping ===
    ${CheckPingDNS1}    defping    0    ${GetDefault Gateway}    default    default    default
    ...    default    default
    Should Be True    "${CheckPingDNS1}"=="True"
    FlushDns
    sleep    5s
    ${CheckPingDNS2}    defping    0    www.dlink.com    default    default    default
    ...    default    default
    Should Be True    "${CheckPingDNS2}"=="False"
    Ethernet_DNS    back
    #===Check MAC \ Address END===
    #===Ping End===
    ToLoginWithoutPassword
    FunctionTable-Settings-Internet
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-My Internet Connection is-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-My Internet Connection is-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-PPPoE-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-PPPoE-SelectChild}
    #===Configure DNS Server===
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Advanced Settings...-Click}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Secondary DNS Server-Input}    8.8.8.8
    #===Configure DNS Server End===
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetPrimary DNS Server2}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server2}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    #===Ping ===
    ${CheckPingDNS3}    defping    0    ${GetDefault Gateway}    default    default    default
    ...    default    default
    Should Be True    "${CheckPingDNS3}"=="True"
    sleep    5s
    ${CheckPingDNS4}    defping    0    www.google.com    default    default    default
    ...    default    default
    Should Be True    "${CheckPingDNS4}"=="True"
    #===Ping End===

0011
    [Documentation]    Internet->IPv4 PPPoE Manual + Static IP test + MTU(Auto) + Mac Address Clone(enable)
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    5.Capture wan packet to make sure DUT wan is using your MAC address
    ...
    ...    6.Capture DUT wan packet -> send PADI with "CHT" as service name
    ...    -------------------------------------
    ...
    ...    OK verify by Dwayne Cheng 20171219
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0011
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPPOE
    Configure IPv4 PPPoE+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPPoE-IP Address-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}
    #sendtext    ${Settings-Internet-IPv4-PPPoE-Service Name-Input}    CHT
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MTU-Auto-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Choose-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-var(1)-SelectChild}    #Setting MAC Address clone
    ${After MAC Address}    getText    ${Settings-Internet-IPv4-PPPoE-MAC Address Clone-Input}
    #save
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    sleep    3s
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${After MAC Address}
    log    ${Finish MAC Address}
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    Should Be True    "${After MAC Address}"=="${Finish MAC Address}"
    Run Keyword If    "${Before MAC Address}"=="${Finish MAC Address}"    Should Be True    False
    ...    ELSE    log    pass
    ${Check-My PC MAC}    MAC_Address    ${Finish MAC Address}
    Should Be True    ${Check-My PC MAC}
    #===Check MAC \ Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1464
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1465
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginWithoutPassword
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    20    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    20s
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    Should Be True    "${CheckDisconnect}"=="False"

0012
    [Documentation]    Internet->IPv4 PPTP Always on + Dynamic IP test + MTU(Auto)
    ...
    ...
    ...    OK verify by Dwayne Cheng 20171218
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0012
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPTP
    Configure PPTP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Dynamic IP-SelectChild}    #setting Dynamic IP
    #Switch to PPTP
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Auto-SelectChild}    #Setting MTU
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPTP)"
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${Finish MAC Address}
    #===Check MAC \ Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1372
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0015
    [Documentation]    Internet->IPv4 PPTP Always on + Static IP test + MTU(Auto)
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    IP address is already in use when configuring Server IP and Static IP Adress
    ...    -------------------------------------
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0015
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting PPTP
    Configure IPv4 PPTP+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPTP-PPTP IP Address-Input}
    #Switch to PPTP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Auto-SelectChild}    #Setting MTU-Auto
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPTP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1372
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0017
    [Documentation]    Internet->IPv4 PPTP Manual + Static IP test + MTU(Auto)
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    IP address is already in use when configuring Server IP and Static IP Adress
    ...    -------------------------------------
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0017
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting PPTP
    Configure IPv4 PPTP+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPTP-PPTP IP Address-Input}
    #Switch to PPTP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Auto-SelectChild}    #Setting MTU
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPTP)"
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    10s
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1372
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    10s
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    Should Be True    "${CheckDisconnect}"=="False"

0018
    [Documentation]    Internet->IPv4 PPTP DNS test
    ...
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    3.Capture wan packet and make sure DUT wan is quering DNS server 8.8.8.8
    ...    -------------------------------------
    ...
    ...    OK verify by Dwayne Cheng 20171218
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0018
    Ethernet_DNS    DHCP
    #===Restore===
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #===Setting PPTP===
    Configure PPTP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}
    #===Configure DNS Server===
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPTP-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPTP-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPTP-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPTP-Secondary DNS Server-Input}    2.2.2.2
    #===Configure DNS Server End===
    #save
    click    ${Settings-Internet-IPv4-DHCP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting Static IP End===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPTP)"
    #===Ping \ Gateway===
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetPrimary DNS Server1}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server1}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #===Ping MTU===
    ${CheckMTU1300}    defping    0    ${GetDefault Gateway}    -f    -l    1300
    ...    default    default
    Should Be True    "${CheckMTU1300}"=="True"
    ${CheckMTU1372}    defping    0    ${GetDefault Gateway}    -f    -l    1372
    ...    default    default
    Should Be True    "${CheckMTU1372}"=="True"
    FlushDns
    sleep    5s
    ${CheckDlink1}    defping    0    www.dlink.com    -f    -l    1300
    ...    default    default
    Should Be True    "${CheckDlink1}"=="False"
    Ethernet_DNS    back
    #===Configure DNS Server===
    FunctionTable-Settings-Internet
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-My Internet Connection is-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-My Internet Connection is-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-PPTP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-PPTP-SelectChild}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPTP-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPTP-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPTP-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-PPTP-Secondary DNS Server-Input}    8.8.8.8
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    5s
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetPrimary DNS Server2}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server2}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${CheckDlink2}    defping    0    www.google.com    -f    -l    1300
    ...    default    default
    Should Be True    "${CheckDlink2}"=="True"
    #===Configure DNS Server End===
    ${CheckMTU1473}    defping    0    ${GetDefault Gateway}    -f    -l    1473
    ...    default    default
    Should Be True    "${CheckMTU1473}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0019
    [Documentation]    Internet->IPv4 L2TP Always on + Dynamic IP test + MTU(Auto)
    ...
    ...    OK verify by Dwayne Cheng 20171218
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0019
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting L2TP
    Configure L2TP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Dynamic IP-SelectChild}    #setting Dynamic IP
    #Switch to L2TP
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Auto-SelectChild}    #Setting MTU
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting L2TP END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (L2TP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1372
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0021
    [Documentation]    Internet->IPv4 L2TP Manual + Dynamic IP test + MTU(Auto)
    ...
    ...    OK verify by Dwayne Cheng 20171218
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0021
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting L2TP
    Configure L2TP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Dynamic IP-SelectChild}    #setting Dynamic IP
    #Switch to L2TP
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Auto-SelectChild}    #Setting MTU
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting L2TP END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (L2TP)"
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    20    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1372
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginWithoutPassword
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    10s
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    Def-Ping    0    ${GetDefault Gateway}

0022
    [Documentation]    Internet->IPv4 L2TP Always on + Static IP test + MTU(Auto)
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    IP address is already in use when configuring Server IP and Static IP Adress
    ...    -------------------------------------
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0022
    #Restore
    ToLoginWithoutPassword
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting L2TP
    Configure IPv4 L2TP+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-L2TP-L2TP IP Address-Input}
    #Switch to L2TP
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Select}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Auto-SelectChild}    #Setting MTU-Auto
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (L2TP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1372
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0024
    [Documentation]    Internet->IPv4 L2TP Manual + Static IP test + MTU(Auto)
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    IP address is already in use when configuring Server IP and Static IP Adress
    ...    -------------------------------------
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0024
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting L2TP
    Configure IPv4 L2TP+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-L2TP-L2TP IP Address-Input}
    #Switch to PPTP
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Select}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Auto-SelectChild}    #Setting MTU-Auto
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (L2TP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1372
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1373
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginWithoutPassword
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    20    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    ${Disconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    Should Be True    "${Disconnect}"=="False"

0025
    [Documentation]    Internet->IPv4 L2TP DNS test
    ...
    ...    Critrntia not test in this case:
    ...
    ...    ------------------------------------
    ...    3.Capture wan packet and make sure DUT wan is quering DNS server 8.8.8.8
    ...    -------------------------------------
    ...
    ...    OK verify by Dwayne Cheng 20171218
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0025
    Ethernet_DNS    DHCP
    #===Restore===
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #===Setting L2TP===
    Configure L2TP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}
    #===Configure DNS Server===
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-L2TP-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-L2TP-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-L2TP-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-L2TP-Secondary DNS Server-Input}    2.2.2.2
    #===Configure DNS Server End===
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (L2TP)"
    #===Ping \ Gateway===
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetPrimary DNS Server1}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server1}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #===Ping MTU===
    sleep    3s
    ${CheckMTU1300}    defping    0    ${GetDefault Gateway}    -f    -l    1300
    ...    default    default
    Should Be True    "${CheckMTU1300}"=="True"
    ${CheckMTU1372}    defping    0    ${GetDefault Gateway}    -f    -l    1372
    ...    default    default
    Should Be True    "${CheckMTU1372}"=="True"
    FlushDns
    sleep    5s
    ${CheckDlink1}    defping    0    www.dlink.com    -f    -l    1300
    ...    default    default
    Should Be True    "${CheckDlink1}"=="False"
    Ethernet_DNS    back
    #===Configure DNS Server===
    Configure L2TP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Primary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-L2TP-Primary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-L2TP-Primary DNS Server-Input}    1.1.1.1
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Secondary DNS Server-Input}    3    true
    clearText    ${Settings-Internet-IPv4-L2TP-Secondary DNS Server-Input}
    sendtext    ${Settings-Internet-IPv4-L2TP-Secondary DNS Server-Input}    8.8.8.8
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    5s
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetPrimary DNS Server2}    getText    ${Home Page-Primary DNS Server(IPv4)-GetVar}
    ${GetSecondary DNS Server2}    getText    ${Home Page-Secondary DNS Server(IPv4)-GetVar}
    ${CheckDlink2}    defping    0    www.google.com    -f    -l    1300
    ...    default    default
    Should Be True    "${CheckDlink2}"=="True"
    #===Configure DNS Server End===
    ${CheckMTU1473}    defping    0    ${GetDefault Gateway}    -f    -l    1473
    ...    default    default
    Should Be True    "${CheckMTU1473}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0070
    [Documentation]    Internet->IPv4 PPTP Always on + Dynamic IP test + MTU(Manual)
    ...
    ...    OK verify by Richard Wu 20171227
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0070
    #copy 12
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Before Change MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Before MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Before Change MAC address END===
    #Setting PPTP
    Configure PPTP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Dynamic IP-SelectChild}    #setting Dynamic IP
    #Switch to PPTP
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}    1450
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPTP)"
    #Finish MAC Address
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish MAC Address}    getText    ${Home Page-MAC Address(IPv4)-GetVar}
    #===Finish MAC Address===
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Check MAC \ Address
    log    ${Before MAC Address}
    log    ${Finish MAC Address}
    #===Check MAC \ Address END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1350
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0107
    [Documentation]    Internet->IPv4 PPTP Manual + Dynamic IP test + MTU(Auto)
    ...
    ...    OK verify by Richard Wu 20171227
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0107
    #copy by 0017
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting PPTP
    Configure PPTP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPTP-PPTP IP Address-Input}
    #Switch to PPTP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Select}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Auto-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Auto-SelectChild}    #Setting MTU-Auto
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    sleep    3s
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    #Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPTP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1350
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    sleep    3s
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0108
    [Documentation]    Internet->IPv4 PPTP Always on + Static IP test + MTU(Manual)
    ...
    ...    OK verify by Richard Wu 20171227
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0108
    #Copy by 15
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting PPTP
    Configure IPv4 PPTP+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPTP-PPTP IP Address-Input}
    #Switch to PPTP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Manual-SelectChild}    #Setting MTU-Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}    1350
    scroll
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPTP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1350
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0110
    [Documentation]    Internet->IPv4 PPTP Manual + Dynamic IP test + MTU(Manual)
    ...
    ...    OK verify by Richard Wu 20171229
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0110
    #copy by 107
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting PPTP
    Configure PPTP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPTP-PPTP IP Address-Input}
    #Switch to PPTP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Advanced Settings...-Click}
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Select}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Manual-SelectChild}    #Setting MTU-Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}    1450
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    sleep    3s
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    #Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (PPTP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1350
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    sleep    3s
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    15s
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    log    ${CheckDisconnect}
    Should Be True    "${CheckDisconnect}"=="False"

0111
    [Documentation]    Internet->IPv4 PPTP Manual + Static IP test + MTU(Manual)
    ...
    ...    Line 39 get pptp ip was not matched
    ...
    ...    OK verify by Richard Wu 20171229
    [Tags]    DKP1611018-PPTP    DKP1611018-PPTP-0111
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting PPTP
    Configure IPv4 PPTP+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-PPTP-PPTP IP Address-Input}
    #Switch to PPTP
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPTP-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-PPTP-MTU-Manual-Input-Input}    1450
    #save
    click    ${Settings-Internet-IPv4-PPTP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (PPTP)"
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Connect Button
    sleep    60s
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1400
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}    #Disconnect Button
    sleep    10s
    ${CheckDisconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    Should Be True    "${CheckDisconnect}"=="False"

0112
    [Documentation]    Internet->IPv4 L2TP Always on + Dynamic IP test + MTU(Manual)
    ...
    ...
    ...    OK verify by Richard Wu 20171229
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0112
    #Copy by 19
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting L2TP
    Configure L2TP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Dynamic IP-SelectChild}    #setting Dynamic IP
    #Switch to L2TP
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}    1400
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting L2TP END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (L2TP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1350
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0114
    [Documentation]    Internet->IPv4 L2TP Manual + Dynamic IP test + MTU(Manual)
    ...
    ...    OK verify by Richard Wu 20171229
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0114
    #copy by 21
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting L2TP
    Configure L2TP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Advanced Settings...-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Address Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Address Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Dynamic IP-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Dynamic IP-SelectChild}    #setting Dynamic IP
    #Switch to L2TP
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}    1400
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting L2TP END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Dynamic IP (L2TP)"
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    20    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1350
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginWithoutPassword
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    10s
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    Def-Ping    0    ${GetDefault Gateway}

0115
    [Documentation]    Internet->IPv4 L2TP Always on + Static IP test + MTU(Manual)
    ...
    ...
    ...    OK verify by Richard Wu 20171229
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0115
    #copy by 22
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting L2TP
    Configure IPv4 L2TP+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Always on-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Always on-SelectChild}    #Reconnect mode = Always on
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-L2TP-L2TP IP Address-Input}
    #Switch to L2TP
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}    1400
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (L2TP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1350
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===

0117
    [Documentation]    Internet->IPv4 L2TP Manual + Static IP test + MTU(Manual)
    ...
    ...
    ...    OK verify by Richard Wu 20171229
    [Tags]    DKP1611018-L2TP    DKP1611018-L2TP-0117
    #Copy by 24
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    #Setting L2TP
    Configure IPv4 L2TP+Static IP-Without Save
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-Reconnect Mode-Manual-SelectChild}    #Reconnect mode = Manual
    ${Set IP Address}    getText    ${Settings-Internet-IPv4-L2TP-L2TP IP Address-Input}
    #Switch to L2TP
    scroll
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Select}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Manual-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-L2TP-MTU-Manual-SelectChild}    #Setting MTU
    waitElementDisplayed    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}    3    true
    clearText    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}
    sendtext    ${Settings-Internet-IPv4-L2TP-MTU-Manual-Input-Input}    1400
    #save
    click    ${Settings-Internet-IPv4-L2TP-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    #===Setting PPPOE END===
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    5    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    ${Home page IP Address}    getText    ${Home Page-IP Address(IPv4)-GetVar}
    Should Be True    "${Set IP Address}"=="${Home page IP Address}"
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    Should Be True    "${Finish ConnectionType}"=="Static IP (L2TP)"
    #Ping \ Gateway
    waitElementDisplayed    ${Home Page-Default Gateway(IPv4)-GetVar}    20    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    Run Keyword If    "${GetDefault Gateway}"=="Not Available"    sleep    60s
    ...    ELSE    log    pass
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${GetDefault Gateway}    getText    ${Home Page-Default Gateway(IPv4)-GetVar}
    log    ${GetDefault Gateway}
    Def-Ping    0    ${GetDefault Gateway}
    #===Ping END===
    #Ping MTU
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1300
    Def-Ping    0    ${GetDefault Gateway}    -f    -l    1350
    ${Packet Fragmented}    defping    0    ${GetDefault Gateway}    -f    -l    1550
    ...    default    default
    Should Be True    "${Packet Fragmented}"=="Packet needs to be fragmented but DF set"
    #===Ping MTU END===
    ToLoginWithoutPassword
    waitElementDisplayed    ${Home Page-RenewReleaseIPAddress-Click}    20    true
    click    ${Home Page-RenewReleaseIPAddress-Click}
    sleep    20s
    ${Disconnect}    defping    0    ${GetDefault Gateway}    -n    10    default
    ...    default    default
    Should Be True    "${Disconnect}"=="False"

0128
    [Documentation]    Internet->IPv4 PPPoE password special characters test
    [Tags]    DKP1611018-PPPoE    DKP1611018-PPPoE-0128
    #Restore
    Restore-To-Default
    #===Restore END===
    ToLoginWithoutPassword
    FunctionTable-Settings-Internet
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-My Internet Connection is-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-My Internet Connection is-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-PPPoE-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-PPPoE-SelectChild}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Username-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Username-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Username-Input}    ~!@#$%^&*()_-+\ /[]{}:';=?<>,."    #Setting \ Account
    ${BeforePPPoEAccount1}    getText    ${Settings-Internet-IPv4-PPPoE-Username-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Password-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Password-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Password-Input}    ~!@#$%^&*()_-+\ /[]{}:';=?<>,."    #Setting \ Password
    ${BeforePPPoEPassword1}    getText    ${Settings-Internet-IPv4-PPPoE-Password-Input}
    sleep    1s
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    ToLoginWithoutPassword
    FunctionTable-Settings-Internet
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-My Internet Connection is-Select}    3    true
    ${AfterPPPoEAccount1}    getText    ${Settings-Internet-IPv4-PPPoE-Username-Input}
    ${AfterPPPoEPassword1}    getText    ${Settings-Internet-IPv4-PPPoE-Password-Input}
    Should Be True    "${BeforePPPoEAccount1}"=="${AfterPPPoEAccount1}"
    Should Be True    "${BeforePPPoEPassword1}"=="${AfterPPPoEPassword1}"
    sleep    1s
    ToLoginWithoutPassword
    FunctionTable-Settings-Internet
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-My Internet Connection is-Select}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-My Internet Connection is-Select}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-PPPoE-SelectChild}    3    true
    click    ${Settings-Internet-IPv4-PPPoE-PPPoE-SelectChild}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Username-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Username-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Username-Input}    ~!@$%^&*()_+[]{}:';=?<>,."    #Setting \ Account
    ${BeforePPPoEAccount1}    getText    ${Settings-Internet-IPv4-PPPoE-Username-Input}
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-Password-Input}    3    true
    clearText    ${Settings-Internet-IPv4-PPPoE-Password-Input}
    sendtext    ${Settings-Internet-IPv4-PPPoE-Password-Input}    ~!@$%^&*()_+[]{}:';=?<>,."    #Setting \ Password
    ${BeforePPPoEPassword1}    getText    ${Settings-Internet-IPv4-PPPoE-Password-Input}
    sleep    1s
    click    ${Settings-Internet-IPv4-PPPoE-Save-Click}
    waitElementDisplayed    ${Settings-Internet-IPv4-StaticIP-Finish-Click}    40    true
    click    ${Settings-Internet-IPv4-StaticIP-Finish-Click}
    sleep    3s
    ToLoginWithoutPassword
    FunctionTable-Settings-Internet
    waitElementDisplayed    ${Settings-Internet-IPv4-PPPoE-My Internet Connection is-Select}    3    true
    ${AfterPPPoEAccount1}    getText    ${Settings-Internet-IPv4-PPPoE-Username-Input}
    ${AfterPPPoEPassword1}    getText    ${Settings-Internet-IPv4-PPPoE-Password-Input}
    Should Be True    "${BeforePPPoEAccount1}"=="${AfterPPPoEAccount1}"
    Should Be True    "${BeforePPPoEPassword1}"=="${AfterPPPoEPassword1}"
    ${CheckLAN}    defping    0    8.8.8.8    default    default    default
    ...    default    default
    Should Be True    "${CheckLAN}"=="True"

test
    #${fw}    getText    xpath    //*[@id="modelName"]
    ToLoginPage
    Lang2English
    ToClickLoginBtn
    waitElementDisplayed    ${Home Page-MAC Address(IPv4)-GetVar}    5    true
    ${Finish ConnectionType}    getText    ${Home Page-Connection Type(IPv4)-GetVar}
    should contain    ${Finish ConnectionType}    PPPoE    msg=not PPPoE
    #Should Be True    "${Finish ConnectionType}"=="Static IP (PPPoE)"

Ping_Gateway
    ToLoginWithoutPassword
    Ping-Gateway
